---
import { getCollection, render } from 'astro:content';
import Entry from '../../layouts/Entry.astro';

export async function getStaticPaths() {
  const projects = await getCollection('projects');
  return projects.map(project => {
    const slug = project.id.includes('/') ? project.id.split('/')[0] : project.id;
    return {
      params: { slug },
      props: { project },
    };
  });
}

const { project } = Astro.props;
const { Content } = await render(project);
---
<Entry
  title={project.data.title}
  subtitle={project.data.subtitle}
  date={project.data.date}
  external={project.data.external}
  section="Project"
>
  <Content />
</Entry>
